\documentclass{svmult}

\usepackage{mathtools}
\usepackage{newtxtext}
\usepackage{newtxmath}
\usepackage{tikz-cd}
\usepackage{datetime}
\usepackage{hyperref}
\usepackage{xypic}

\pdfstringdefDisableCommands{%
%  \def${}%
  \def\alpha{alpha}%
  \def\({}%
  \def\){}%
  \def\texttt#1{<#1>}%
}

% To avoid two warning messages
\usepackage{bookmark}
\makeatletter
\def\toclevel@title{-1}
\def\toclevel@author{0}
\makeatother

% For mathcal fonts
\usepackage{eucal} 

\let\remark\relax
\let\theorem\relax
\let\lemma\relax
\let\definition\relax
\let\proposition\relax
\let\corollary\relax
\let\exercise\relax
\let\example\relax
\let\conjecture\relax

\let\openbox\relax

\def\factname{Fact}

\spnewtheorem{theorem}{\theoremname}[section]{\bfseries}{\itshape}
%\renewcommand\thetheorem{\arabic{theorem}}
\spnewtheorem{lemma}[theorem]{\lemmaname}{\bfseries}{\itshape}
\spnewtheorem{definition}[theorem]{\definitionname}{\bfseries}{\itshape}
\spnewtheorem{proposition}[theorem]{\propositionname}{\bfseries}{\itshape}
\spnewtheorem{corollary}[theorem]{\corollaryname}{\bfseries}{\itshape}
\spnewtheorem{exercise}[theorem]{\exercisename}{\bfseries}{\upshape}
\spnewtheorem{example}[theorem]{\examplename}{\bfseries}{\upshape}
\spnewtheorem{examples}[theorem]{\examplesname}{\bfseries}{\upshape}
\spnewtheorem{remark}[theorem]{\remarkname}{}{\upshape}
\spnewtheorem{conjecture}[theorem]{\conjecturename}{\bfseries}{\upshape}
\spnewtheorem{notation}[theorem]{\notationname}{\bfseries}{\upshape}
\spnewtheorem{convention}[theorem]{\conventionname}{\bfseries}{\upshape}
\spnewtheorem{fact}[theorem]{\factname}{\bfseries}{\upshape}


\newcommand{\Z}{\mathbb{Z}}
\newcommand{\id}{\mathrm{id}}
\newcommand{\im}{\operatorname{img}}
\newcommand{\Obj}{\operatorname{Obj}}
\newcommand{\Sym}{\operatorname{Sym}}
\newcommand{\End}{\operatorname{End}}

\newcommand{\category}[1]{{\normalfont\textbf{#1}}}
\newcommand{\Grp}{\category{Grp}}
\newcommand{\Hp}{\category{Hp}}

% para enumerar
\renewcommand{\labelenumi}{\arabic{enumi})}

% for QED
\let\proof\relax\let\endproof\relax
\usepackage{amsthm}

\makeindex

\begin{document}

\title*{Trusses: between braces and rings}
\author{Tomasz Brzezi\'nski}

\institute{Tomasz Brzezi\'nski \at Swansea University (UK) and University of Bialystok (Poland), 
\email{t.brzezinski@swansea.ac.uk}}

%\author{Leandro Vendramin}
%\institute{Leandro Vendramin \at Vrije Universiteit Brussel, \email{Leandro.Vendramin@vub.be}}

\maketitle

\abstract{
An algebraic structure is a collection of sets with operations. Typical and most widespread across mathematics are systems such as a semigroup, monoid, group, ring, field, associative algebra, vector space or module. In this  course we will study some simple algebraic systems which have recently gained prominent position in algebra and topology such as braces,  racks or quandles (sets with two operations interacting with  each other in prescribed ways).  In particular we will explore a little known fact (first described nearly 100 years ago by Pruefer and Baer) that one can give a definition of a group without requesting existence of the neutral element and inverses by using a ternary rather than a binary operation (i.e. an operation with three rather than the usual two inputs). A set with such a suitable ternary operation is known as a heap. By picking an element in a heap, the ternary operation is reduced to the binary group operation, for which the chosen element is the neutral element (the resulting group is known as  a retract). We will study properties and examples of heaps and relate them to the properties of corresponding groups (retracts). Next we will look at heaps with an additional binary operation that distributes over the ternary heap operation, known as trusses, relate them to both rings and braces, and study their properties and applications.
}

%{\let\clearpage\relax\tableofcontents}

% 28/4/2022
\section{Lecture 1}

\subsection{Introduction}

The notes correspond to a 8-hours mini-course 
taught by Prof. Tomasz Brzezi\'nski at the 
Department of Mathematics at ULB, Brussels, in May 2022.
The course is addressed to Master and PhD students,
researchers and any one else with an 
interest in (new) algebraic structures. The course
is based on \cite{MR4009388,MR4368576,MR4400063}. 


Notes by Leandro Vendramin.  
This version
was compiled on \today~at~\currenttime.

\subsection{Algebraic structures}

We start with some basic definitions from universal algebra. We refer
to \cite{MR620952} for more details. 

\begin{definition}
\index{Algebraic structure}
    An \textbf{algebraic structure} is a set $A$ 
    with a collection of maps (called operations) 
    $\alpha_i\colon A^{|\alpha_i|}\to A$ for $i\in I$. By 
    convention, $A^0=\{*\}$. This algebraic structure on $A$ 
    will be denoted by $(A,(\alpha_i)_{i\in I})$. 
    The number $|\alpha_i|\in\Z_{\geq0}$ is the
    \textbf{arity} of the operation $\alpha_i$. 
\end{definition}

For example, let $A$ be a set and 
$\alpha\colon A^{|\alpha|}\to A$ be a map. If $|\alpha|=0$, 
then $\alpha$ is a nullary operation. If $|\alpha|=1$, then 
$\alpha$ is a unary operation. If $|\alpha|=2$, then $\alpha$ is a binary operation. 

\begin{example}
    A semigroup is a set $A$ with an  
    operation $A\times A\to A$, $(a,b)\mapsto ab$. Thus 
    a semigroup 
    is an algebraic structure.
\end{example}

Other examples of algebraic structures are 
monoids, groups, vector spaces. 

\begin{definition}
\index{Algebraic structures!of the same type}
    We say that the algebraic structures $(A,(\alpha_i)_{i\in I})$ and $(B,(\beta_i)_{i\in I})$ 
    have the \textbf{same type} if $|\alpha_i|=|\beta_i|$ for all $i\in I$.
\end{definition}

\begin{definition}
\index{Homomorphism}
    Let $(A,(\alpha_i)_{i\in I})$ and $(B,(\beta_i)_{i\in I})$ be 
    algebraic structures of the same type. A map $f\colon A\to B$ 
    is a \textbf{homomorphism} of algebraic structures if 
    for every $i\in I$ the diagram 
    \[
    \begin{tikzcd}
	{A^{|\alpha_i|}} & A \\
	{B^{|\beta_i|}} & B
	\arrow["{\alpha_i}", from=1-1, to=1-2]
	\arrow["f", from=1-2, to=2-2]
	\arrow["{f^{|\alpha_i|}}"', from=1-1, to=2-1]
	\arrow["{\beta_i}"', from=2-1, to=2-2]
    \end{tikzcd}
    \]
    is commutative.     
\end{definition}

If $f\colon A\to B$ is a map and $X\subseteq A$ is a subset, 
we write $f|_X$ to denote 
the restriction of $f$ on $X$, that is the
map $f\colon X\to B$, $x\mapsto f(x)$. 

\begin{exercise}
    If $f\colon (A,(\alpha_i)_{i\in I})\to (B,(\beta_i)_{i\in I})$ is
    a homomorphism, then the \textbf{image}  
    $\left(\im(f),(\beta_i|_{\im(f)})_{i\in I}\right)$ of $f$ 
    is an algebraic structure of the same type. 
\end{exercise}

\begin{definition}
\index{Congruence}
    A \textbf{congruence} on 
    $(A,(\alpha_i)_{i\in I})$ is an equivalence relation $R$ on $A$ 
    such that for every $i\in I$ one has 
    \[
    a_k R b_k\quad\forall k\in\{1,\dots,|\alpha_i|\}\implies \alpha_i(a_1,\dots,a_{|\alpha_i|}) R \alpha_i(b_1,\dots,b_{|\alpha_i|}).
    \]
\end{definition}

\begin{exercise}
Prove the following statements:
\begin{enumerate}
    \item If $R$ is a congruence on $(A,(\alpha_i)_{i\in I})$, then 
    $\left(A/R,(\overline{\alpha_i})_{i\in I}\right)$, 
    where 
    \[
    \overline{\alpha_i}(\overline{a_1},\dots,\overline{a_{|\alpha_i|}})
    =\overline{\alpha_i(a_1,\dots,a_{|\alpha_i|})},
    \]
    is an algebraic structure of the same type. 
    \item If $f\colon (A,(\alpha_i)_{i\in I})\to (B,(\beta_i)_{i\in I})$ is a homomorphism, 
    then 
    \[
    a(\ker f)b\Longleftrightarrow f(a)=f(b)
    \]
    is a congruence. This is known as the \textbf{kernel relation}
    $\ker f$.  
    \item Every congruence is a kernel relation. 
\end{enumerate}
\end{exercise}

\subsection{Heaps}

\begin{definition}
\index{Heap}
A \textbf{heap} is a set $H$ with a ternary operation $H\times H\times H\to H$, $(x,y,z)\mapsto [x,y,z]$, 
such that for all $a,b,c,d,e\in H$, 
\begin{align}
    \label{eq:associativity}&[[a,b,c],d,e]=[a,b,[c,d,e]],\\
    \label{eq:Malcev}&[a,a,b]=[b,a,a]=b.
\end{align}
\end{definition}

Equality \eqref{eq:Malcev} is known as Malcev's identity. 
%An application of \eqref{eq:Malcev} yields the following result. 

\begin{definition}
\index{Heap!abelian}
    A heap $H$ is \textbf{abelian} if $[a,b,c]=[c,b,a]$ for all $a,b,c\in H$. 
\end{definition}

Homomorphism of heaps are defined in the usual way. Heaps and heap homomorphism for a category. 
It will be denoted by $\Hp$. 

\subsection{Examples}

The empty set $\emptyset$ is a heap. However, we will only work with non-empty heaps. 

\begin{example}
\label{exa:H(G)}
    If $G$ is a group, then the operation
    \[
    [a,b,c]=ab^{-1}c
    \]
    turns $G$ into a heap $H(G)$. Note that
    the heap $G$ is abelian if and only if $H(G)$ is abelian. Moreover, 
    if $f\colon G\to G_1$ is a homomorphism of groups, then $H(f)\colon H(G)\to H(G_1)$, $x\mapsto f(x)$, is a 
    homomorphism of heaps. 
\end{example}

\begin{example}
    Let $G$ be a group and $H$ be a subgroup of $G$. For every $a\in G$, the coset
    $aH=\{ah:h\in H\}$ is a heap with
    $[ax,ay,az]=axy^{-1}z$. 
\end{example}

Recall that a \textbf{groupoid} is a small category $\mathcal{C}$ in which every morphism is an isomorphism. 
We write $\Obj(\mathcal{C})$ to denote the set of objects of $\mathcal{C}$. If $A,B\in\Obj(\mathcal{C})$, 
then $\mathcal{C}(A,B)$ will be the set of morphisms $A\to B$. 

\begin{example}
    Let $\mathcal{C}$ be a groupoid and $A,B\in\Obj(\mathcal{C})$. Then $\mathcal{C}(A,B)$ is a heap with
    $[f,g,h]=f\circ g^{-1}\circ h$. Note that this is well-defined, as
    \[
    \begin{tikzcd}
	A & B & A & B
	\arrow["h", from=1-1, to=1-2]
	\arrow["{g^{-1}}", shift left=1, from=1-2, to=1-3]
	\arrow["f", from=1-3, to=1-4]
	\arrow["g", shift left=1, from=1-3, to=1-2]
    \end{tikzcd}
    \]
\end{example}

An \textbf{affine space} (over a field $F$) 
is a set $A$ with a free and transitive action of an $F$-vector space $\overrightarrow{A}$. This means
that there is a map $A\times\overrightarrow{A}\to A$, $(a,v)\mapsto a+v$, such that 
the following condition hold:
\begin{enumerate}
    \item $a+(v+w)=(a+v)+w$ for all $a\in A$ and $v,w\in\overrightarrow{A}$.
    \item $a+0=a$ for all $a\in A$.
    \item For every $a,b\in A$ there exists a unique $\overrightarrow{ab}\in\overrightarrow{A}$ such that
    $b=a+\overrightarrow{ab}$.
\end{enumerate}

\begin{example}
\label{exa:affine}
    Let $A$ be an affine space. Then $A$ is an abelian 
    heap with the operation $[a,b,c]=a+\overrightarrow{bc}$. 
    
    We first prove Malcev's identities:
    Clearly, $[a,a,b]=a+\overrightarrow{ab}=b$, as $\overrightarrow{ab}$ is the unique
    vector that sends $a$ to $b$. Similarly, $[b,a,a]=b$, as $\overrightarrow{aa}=0$. 
    
    We claim that
    $\overrightarrow{a(b+v)}=\overrightarrow{ab}+v$ for all $a,b\in A$ and $v\in\overrightarrow{A}$. 
    In fact, using Malcev's identities, 
    \[
    a+\overrightarrow{a(b+v)}=b+v=\left(a+\overrightarrow{ab}\right)+v=a+\left(\overrightarrow{ab}+v\right).
    \]
    Now we compute
    \begin{align*}
        [a,b,[c,x,y]] &= \left[a,b,c+\overrightarrow{xy}\right]
        =a+\overrightarrow{b\left(x+\overrightarrow{xy}\right)}\\
        &=a+\left(\overrightarrow{bc}+\overrightarrow{xy}\right)
        =\left(a+\overrightarrow{bc}\right)+\overrightarrow{xy}
        =[[a,b,c],x,y].
    \end{align*}
    To prove that the heap is abelian we first note that since 
    \[
    a+\left(\overrightarrow{ab}+\overrightarrow{ba}\right)=b+\overrightarrow{ba}=a,
    \]
    it follows that $\overrightarrow{ab}+\overrightarrow{ba}=0$. Since
    \[
    c=b+\overrightarrow{bc}=\left(a+\overrightarrow{ab}\right)+\overrightarrow{bc},
    \]
    it follows that 
    \[
    [c,b,a]=c+\overrightarrow{ba}=a+\overrightarrow{ab}+\overrightarrow{bc}+\overrightarrow{ba}
    =a+\overrightarrow{bc}
    =[a,b,c].
    \]
\end{example}

\subsection{Heaps vs. groups}

We now summarize the relationship between groups and heaps. Let $\Grp$ denote 
the category of groups and group homomorphisms. 

\begin{theorem}\
\label{thm:heaps_and_groups}
\begin{enumerate}
    \item The assignment $G\to H(G)$ and $f\mapsto H(f)$ is a functor from $\Grp$ to $\Hp$.
    \item For any heap $H$ and any $e\in H$, the operation $ab=[a,e,b]$ turns $H$ into a group. 
    This group is known as the \textbf{retract} 
    $G(H,e)$ of $H$ at $e$. 
    \item If $f\colon H\to H'$ is a heap homomorphism, then for all $e\in H$ and $e'\in H'$
    the maps
    \begin{align*}
        &f_e^{e'}\colon G(H,e)\to G(H',e'),&&a\mapsto [f(a),f(e),e'],\\
        &f_{e'}^{e}\colon G(H,e)\to G(H',e'),&&a\mapsto [e',f(e),f(a)],
    \end{align*}
    are group homomorphisms. 
    \item If $H$ is a heap and $e\in H$, then $H(G(H,e))=H$.
    \item If $G$ is a group and $x\in G$, then $G(H(G),x)\simeq G$. 
\end{enumerate}
\end{theorem}

\begin{proof}[Sketch of the proof]
    Routine calculations prove 1), see Exercise \ref{exa:H(G)}. 
    
    Let us prove 2). By using \eqref{eq:Malcev} we obtain that $e$ is the identity of $G(H,e)$. For example,
    $ae=[a,e,e]=a$. If $a\in H$, then $a^{-1}=[e,a,e]$. In fact,
    \[
    aa^{-1}=[a,e,a^{-1}]=[a,e,[e,a,e]]=[[a,e,e],a,e]=[a,a,e]=e.
    \]
    The associativity is left as an exercise. 
    
    3) Let us prove that $f_e^{e_1}$ is a group homomorphism. Let $a,b\in H(G)$. On the one hand,
    \begin{align*}
    f_e^{e_1}(ab)&=f_e^{e_1}([a,e,b])\\
    &=[f([a,e,b]),f(e),e_1]\\
    &=[[f(a),f(e),f(b)],f(e),e_1]\\
    &=[f(a),f(e),[f(b),f(e),e_1]].
    \end{align*}
    On the other hand, 
    \begin{align*}
    f_e^{e_1}(a)f_e^{e_1}(b)&=[f(a),f(e),e_1][f(b),f(e),e_1]\\
    &=[[f(a),f(e),e_1],e_1,[f(b),f(e),e_1]]\\
    &=[f(a),f(e),[e_1,e_1,[f(b),f(e),e_1]]\\
    &=[f(a),f(e),[f(b),f(e),e_1]].
    \end{align*}
    The other equality is similar. 
    
    We prove 4). We start with a heap $H$. 
    Fix $e\in H$ and construct the group $G(H,e)$ with
    multiplication $(x,y)\mapsto xy=[x,e,y]$. Now we construct the heap
    $H(G(H,e))$ with operation $(a,b,c)\mapsto ab^{-1}c$. Recall that 
    $b^{-1}=[e,b,e]$. Thus 
    \begin{align*}
        ab^{-1}c 
        &= [ab^{-1}, e, c]
        = [[a,e,b^{-1}],e,c]\\
        &= [[a,e,[e,b,e]],e,c]
        = [[[a,e,e],b,e],e,c]\\
        &= [[a,b,e],e,c]
        = [a,b,[e,e,c]]
        = [a,b,c].
    \end{align*}
    
    To prove 5) recall that $G$ has multiplication $(a,b)\mapsto ab$. 
    Then $H(G)$ is a heap with $[a,b,c]=ab^{-1}c$ and for $x\in G$, 
    $G(H(G),x)$ is a group with
    multiplication $(a,b)\mapsto a\cdot b=[a,x,b]=ax^{-1}b$. The 
    map $f\colon G\to G(H(G),x)$, $a\mapsto ax$ is a group homomorphism, as 
    \[
    f(ab)=(ab)x=(ax)x^{-1}(bx)=f(a)x^{-1}f(b)=f(a)\cdot f(b).
    \]
    Moreover, $f$ is bijective with inverse $G(H(G),x)\to G$, $a\mapsto ax^{-1}$. 
\end{proof}

As an application of Theorem \ref{thm:heaps_and_groups} we can quickly prove
the several properties of heaps. 

\subsection{Properties of heaps}

We now prove several properties of heaps. Instead of using Theorem \ref{thm:heaps_and_groups}
we rather provide heap-theoretic proofs. 

\begin{theorem}
\label{thm:properties}
Let $H$ be a heap and $a,b,c,d,e\in H$. Then the following statements hold:
\begin{enumerate}
    \item If $[a,b,c]=d$, then $a=[d,c,b]$. 
    \item $[a,b,[c,d,e]]=[a,[d,c,b],e]$.
    \item In $[a,b,c]=d$, any three elements determine the fourth one. 
    \item $a=b$ if and only 
        if $[a,b,c]=c$ for all $c\in H$. 
\end{enumerate}
\end{theorem}

\begin{proof}
Let us start with 1). Using \eqref{eq:associativity} and \eqref{eq:Malcev}, 
\[
a=[a,b,b]=[a,b,[c,c,b]]=[[a,b,c],c,b]=[d,c,b].
\]

We now prove 2). Let $a,b,c,d,e\in H$. Then \eqref{eq:associativity} and \eqref{eq:Malcev} imply that
\begin{align*}
    a=[[a,b,c],c,b]=\left[[[a,b,c],d,d],c,b\right]=\left[[a,b,c],d,[d,c,b]\right].
\end{align*}
Using 1) and Malcev's identities we obtain that
\[
[a,b,c]=\left[a,[d,c,b],d\right]=\left[a,[d,c,b],[e,e,d]\right]=\left[[a,[d,c,b],e],e,d\right].
\]
Again by using 1) we conclude that
\[
[a,[d,c,b],e]=\left[[a,b,c],d,e\right].
\]

%Let $h\in H$. Then $G(H,h)$ is a group
%with $ab=[a,h,b]$ and $H(G(H,h))=H$. Moreover, 
%$xy^{-1}z=[x,y,z]$. On the one hand, 
%\begin{align*}
%    [a,b,[c,d,e]]=ab^{-1}[c,d,e]=ab^{-1}cd^{-1}e
%\end{align*}
%On the other hand,
%\begin{align*}
%    [a,[d,c,b],e]=a[d,c,b]^{-1}e=a(dc^{-1}b)^{-1}e=ab^{-1}cd^{-1}e.
%\end{align*}

Let us prove 3). Let $a,b,c\in H$ and $d=[a,b,c]$. In 1) 
we obtained that $a=[d,c,b]$. Similarly,  
\begin{align*}
\label{eq:Iknow3}
c=[b,b,c]=[[b,a,a],b,c]=[b,a,[a,b,c]]=[b,a,d].
\end{align*}
Now using 2) we obtain
\[
b=[b,a,a]=[c,c,[b,a,a]]=[c,[a,b,c],a]=[c,d,a].
\]

To prove 4) note that, if $a=b$, then $[a,b,c]=[a,a,c]=c$ for all $c\in H$ 
by Malcev's identity. Conversely,
if $[a,b,c]=c$ for all $c\in H$, then, 
in particular, $a=[a,b,b]=b$ by Malcev's identity. 
\end{proof}

\begin{exercise}
\label{xca:equality}
    Let $H$ be a heap and $a,b\in H$. Prove that
    $a=b$ if and only if there exists $c\in H$ such that 
    $[a,b,c]=c$.
\end{exercise}

For $n\in\Z_{\geq2}$ let 
$\Sym_n$ be the symmetric group in $n$ letters. 

\begin{exercise}
\label{xca:abelian}
    In an abelian heap,
    \[
    [x_1,y_1,x_2,y_2,\dots,x_n,y_n,x_{n+1}]=[x_{\sigma(1)},y_{\tau(1)},\dots,x_{\sigma(n)},y_{\tau(n)},x_{\sigma(n+1)}]
    \]
    for all $\sigma\in\Sym_{n+1}$ and $\tau\in\Sym_n$. 
\end{exercise}

The previous exercise and Malcev's identity \eqref{eq:Malcev}
give a useful trick that avoids painful calculations in the context of abelian heaps. 
Let us do a concrete example:
\begin{align*}
    [a,b,c,d,b]=[a,b,[c,d,b]]=[a,b,[b,d,c]]=[[a,b,b],d,c]=[a,d,c].
\end{align*}

\subsection{sub-heaps and the sub-heap relation}

\begin{definition}
    Let $H$ be a heap. 
    A non-empty subset $S$ of $H$ is a \textbf{sub-heap} if $[s,s_1,s_2]\in S$ for all 
    $s,s_1,s_2\in S$. 
\end{definition}

\begin{exercise}
    Let $H$ be a heap, $e\in H$ and $S$ be a non-empty subset of $H$. 
    Prove that $S$ is a sub-heap if and only if $S$ is a subgroup of $G(H,e)$. 
\end{exercise}

If $H$ is a heap and $S$ is a sub-heap of $H$, we define 
a \textbf{sub-heap relation} as follows:

\[
a\sim_S b\Longleftrightarrow [a,b,s]\in S\text{ for some $s\in S$}.
\]
Note that $a\sim_Sb$ if and only if $[a,b,s]\in S$ for all $s\in S$. 

\begin{proposition}
    Let $H$ be a heap and $S$ be a sub-heap. Then $\sim_S$ is an equivalence relation. 
\end{proposition}

\begin{proof}
    Let $a,b,c\in S$. Then $a\sim_S a$, as $[a,a,a]=a$ by Malcev's identity. 
    If $a\sim_S b$, then $[a,b,s]\in S$ for some $s\in S$. Thus, since 
    \[
    [b,a,[a,b,s]]=[[b,a,a],b,s]=[b,b,s]=s\in S,
    \]
    we obtain that $b\sim_S a$. 
    Finally, assume that $a\sim_S b$ and $b\sim_S c$. We know that 
    $c\sim_S a$, so 
    $[c,a,s]\in S$ for some $s\in S$. Thus 
    \[
    [a,c,[c,a,s]]=[[a,c,c],a,s]=[a,a,s]=s\in S
    \]
    and hence $a\sim_S c$. 
\end{proof}

% 5/5/2022
\section{Lecture 2}

Let $H$ be a heap and $S\subseteq H$ be a sub-heap. For $a\in H$ 
the orbit of $a$ is the set
\[
\overline{a}=\{c\in H:c\sim_S a\}
\]
We write $H/S$ to denote the set
of equivalence classes.

\begin{theorem}
    Let $H$ be a heap and $S$ be a sub-heap of $H$. The following statements hold:
    \begin{enumerate}
        \item For every $s\in S$, $\overline{s}=S$. 
        \item For every $a\in H$, $\overline{a}$ is a sub-heap of $H$.
        \item For every $a,b\in H$, 
        the map
        \[
        \tau_b^a\colon H\to H,\quad
        c\mapsto [c,b,a],
        \]
        is an automorphism of heaps. 
        \item For every $a,b\in H$, 
        $\overline{a}\simeq\overline{b}$ as heaps. 
        \item For every $a\in H$, $\sim_S=\sim_{\overline{a}}$. 
    \end{enumerate}
\end{theorem}

\begin{proof}
    Let us first prove 1). Let $s\in S$. To prove that 
    $\overline{s}\subseteq S$ let 
    $a\in H$ be such that $a\sim_Ss$. Then 
    $[a,s,t]=u\in S$ for some $t\in S$. By Theorem \ref{thm:properties}, 
    $a=[u,t,s]\in S$, as $S$ is a sub-heap. Conversely, 

    if $a\in S$, then, in particular, $[a,s,s]\in S$. Thus 
    $a\sim_Ss$. 

    We now prove 2). Let $x,y,z\in S$ be such that $x,y,z\in\overline{a}$. 
    Since $x\sim_Sa$ and $y\sim_Sa$, it follows that 
    $x\sim_Sy$, so there exists $s\in S$ such that $[x,y,s]\in S$.
    Since  
    \[
    [[x,y,z],z,s]=[x,y,[z,z,s]]=[x,y,s]\in S, 
    \]
    one has $[x,y,z]\sim_Sz$. Now the claim follows since 
    $z\sim_Sa$.
    
    Let us prove 3). On the one hand,
    \[
    \tau_b^a([x,y,z])=[[x,y,z],b,a]]=[x,y,[z,b,a]].
    \]
    On the other hand, using Theorem \ref{thm:heaps_and_groups}
    and Malcev's identities:
    \begin{align*}
        [\tau_b^a(x),\tau_b^a(y),\tau_b^a(z)] &= 
        [[x,b,a],[y,b,a],[z,b,a]]\\
        &=[x,b,[a,[y,b,a],[z,b,a]]\\
        &=[x,b,[a,[a,b,y],[z,b,a]]\\
        &=[x,b,[[a,a,b],[y,[z,b,a]]\\
        &=[[x,b,b],[y,[z,b,a]]\\
        &=[x,y,[z,b,a]].
    \end{align*}
    The map $\tau_b^a$ is bijective with inverse $\tau_a^b$, as, 
    for example, 
    \[
    \tau_b^a\tau_a^b(c)
    =\tau_b^a([c,a,b])=[[c,a,b],b,a]=[c,a,[b,b,a]]=[c,a,a]=c.
    \]
    
    4) Let $a,b\in H$. The map $\tau_a^b$ is an automorphism of heaps
    such that $\tau_a^b(a)=b$. We claim that 
    $\tau_a^b(\overline{a})=\overline{b}$. Let $x\in H$ be such that 
    $x\sim_Sa$. In particular, $a\sim_Sx$, so 
    $[a,x,s]\in S$ for some $s\in S$. Now 
    $\tau_a^b(x)\sim_Sb$, as 
    \begin{align*}
    \left[\tau_a^b(x),b,[a,x,s]\right]&=\left[[x,a,b],b,[a,x,s]\right]\\
    &=\left[x,a,[b,b,[a,x,s]\right]
    =\left[x,a,[a,x,s]\right]=s\in S.
    \end{align*}
    
    5) Assume first that $x\sim_{\overline{a}}y$. Then there exists $b\in\overline{a}$ 
    such that $[x,y,b]\sim_Sa$. Since $[x,y,b]\sim_Sa$ and $b\sim_Sa$, it follows
    that $[x,y,b]\sim_Sb$. Thus there exists $s\in S$
    such that 
    \[
    [x,y,s]=[x,y,[b,b,s]]=[[x,y,b],b,s]\in S.
    \]
    That is $x\sim_Sy$. Conversely, assume now that $x\sim_Sy$. Then 
    there exists $s\in S$ such that 
    \[
    [[x,y,b],b,s]=[x,y,[b,b,s]]=[x,y,s]\in S.
    \]
    Let $b\in\overline{a}$. Since $[x,y,b]\sim_Sb$, it follows that 
    $[x,y,b]\sim_Sa$ and hence $x\sim_{\overline{a}}y$. 
\end{proof}

\begin{definition}
    A sub-heap $S$ of $H$ is \textbf{normal} if 
    for every $a\in H$ and $s,e\in H$ one has 
    $[[a,e,s],a,e]\in S$.  
\end{definition}

Note a sub-heap $S$ of $H$ is normal if and only if 
for every $a\in H$ and $s,e\in S$ there exists 
$t\in S$ such that $[a,e,s]=[t,e,a]$.
    
\begin{exercise}
    Prove that a sub-heap $S$ of $H$ is normal if and only if 
    $S$ is a normal subgroup of $G(H,e)$ for every $e\in S$. 
\end{exercise}

\begin{theorem}
    Let $f\colon H\to K$ be a homomorphism of heaps. For $c\in H$
    let 
    \[
    \overline{c}=\{b\in H:f(b)=f(c)\}
    \]
    be the equivalence class of $c$ with respect to $\ker(f)$. 
    Then $\overline{c}$ is a sub-heap of $H$.  
\end{theorem}

\begin{proof}
    To prove that $\overline{c}$ is a sub-heap first note that 
    $c\in\overline{c}$, so $\overline{c}$ is non-empty. 
    Now let $x,y,z\in\overline{c}$. 
    Then $f(x)=f(y)=f(z)=$ 
    $[x,y,z]\in\overline{c}$, as
    \[
    f([x,y,z])=[f(x),f(y),f(z)]=[f(c),f(c),f(c)]=f(c).
    \]
    
    To prove that $\overline{c}$ is normal let $x,y\in\overline{c}$ and $a\in H$. 
    Since $f(x)=f(y)=f(c)$, 
    \begin{align*}
        f\left(\left[[x,y,s],x,y]\right]\right)&=\left[[f(a),f(x),f(y)],f(a),f(x)\right]\\ 
        &=\left[[f(a),f(c),f(c)],f(a),f(c)\right]\\
        &=[f(a),f(a),f(c)]=f(c).\qedhere
    \end{align*}
\end{proof}

\begin{definition}
    Let $f\colon H\to K$ be a homomorphism of heaps and $e\in f(H)$. 
    An $e$-kernel of $f$ is defined as the set
    \[
    \ker_ef=\{a\in H:f(a)=e\}.
    \]
\end{definition}

\begin{theorem}
    Let $f\colon H\to K$ be a homomorphism of heaps and $e\in f(H)$. 
    \begin{enumerate}
        \item $\ker_ef$ is a normal sub-heap of $H$. 
        \item $a\sim_{\ker_ef}b$ if and only if $f(a)=f(b)$. 
        \item For every $e,e_1\in f(H)$, $\ker_ef\simeq\ker_{e_1}f$. 
    \end{enumerate}
\end{theorem}

\begin{proof}
    Let us prove 1). By definition, $\ker_ef$ is non-empty. If $x,y,z\in\ker_ef$, then 
    $f(x)=f(y)=f(z)=e$. Since $f$ is a heap homomorphism, 
    \[
    f([x,y,z])=[f(x),f(y),f(z)]=[e,e,e]=e
    \]
    and hence $[x,y,z]\in\ker_ef$. To prove that $\ker_ef$ is normal
    note that
    \[
    f\left(\left[ [a,x,y],a,x\right]\right)
    =\left[ [f(a),f(x),f(y)],f(a),f(x)\right]
    =\left[ [f(a),e, e],f(a),e\right]=e.
    \]
    
    Now we prove 2). Let $S=\ker_ef$. Then 
    \begin{align*}
        a\sim_Sb &\Longleftrightarrow [a,b,s]\in S\text{ for some $s\in S$}\\
        & \Longleftrightarrow f([a,b,s])=e\text{ for some $s\in H$ such that $f(s)=e$}\\
        & \Longleftrightarrow [f(a),f(b),e]=e\\
        & \Longleftrightarrow f(a)=f(b),
    \end{align*}
    by Exercise \ref{xca:equality}. 
    
    Finally we prove 3). Let $x,y\in H$ be such that $f(x)=e$ and $f(y)=e_1$. 
    Note that
    \[
    \ker_ef=\{a\in H:f(a)=e\}=\{a\in H:f(a)=f(x)\}=\overline{x}
    \]
    Similarly, $\ker_{e_1}f=\overline{y}$. We know that both $\overline{x}$ and
    $\overline{y}$ are sub-heaps of $H$. They are isomorphic, 
    as $\tau_x^y(\overline{x})=\overline{y}$. In fact, if $z\in\overline{x}$, 
    then $\tau_x^y(z)\in\overline{y}$, as 
    \[
    f(\tau_x^y(z))=f([z,x,y])=[f(z),f(x),f(y)]=[f(x),f(x),f(y)]=f(y).\qedhere 
    \]
\end{proof}

We leave the proof of the following result as an exercise. 

\begin{corollary}
    Every congruence of heaps is a sub-heap relation with respect to a normal sub-heap.  
\end{corollary}

\subsection{Universal differences between heaps and groups} 

Let $X$ be a non-empty set. The set $W(X)$ of reduced words on $X$ 
is defined as the set of words 
$x_1\cdots x_{2n+1}$ in elements of $X$ of odd length such that no
consecutive letters are the same, i.e. 
\[
W(X)=\{x_1\cdots x_{2n+1}:n\geq1,\,x_1,\dots,x_{2n+1}\in X,\,x_i\ne x_{i+1}\text{ for all $i$}\}
\]

For a word $x_1\cdots x_{2n+1}$ the opposite 
word is 
\[
(x_1\cdots x_{2n+1})^{\operatorname{t}}=x_{2n+1}\cdots x_2x_1.
\]
On $W(X)$ we define a ternary operation $[-,-,-]$ by \emph{grafting and pruning}. What does it mean? 
If $u,v,w\in W(X)$, then $[u,v,w]$ is obtained by removing (or pruning) all 
pairs of consecutive equal letters from $uv^{\operatorname{t}}w$ (obtained by
concatenation of $u$, $v^{\operatorname{t}}$ and $w$). One
proves that $\left(W(X),[-,-,-]\right)$ is a heap. It is the \textbf{free heap} on 
$X$ and it will be denoted by $\mathcal{H}(X)$. 

\begin{definition}
    Let $X$ be a set. A \textbf{free heap} on $\mathcal{H}(X)$ is a heap with with the following
    property: for any heap $H$ and any map $f\colon X\to H$ there exists a unique
    heap homomorphism $\varphi\colon \mathcal{H}(X)\to H$ such that
\[\begin{tikzcd}
	X & {\mathcal{H}(X)} \\
	H
	\arrow["\iota", from=1-1, to=1-2]
	\arrow["f"', from=1-1, to=2-1]
	\arrow["{\varphi }", dashed, from=1-2, to=2-1]
\end{tikzcd}\]
    commutes, where $\iota\colon X\to W(X)$ denotes the inclusion. 
\end{definition}

\begin{example}
        $\mathcal{H}(\{x\})=\{x\}$.
\end{example}

\begin{example}
        $\mathcal{H}(\{x,y\})\simeq \mathcal{H}(\Z)$ via $x\mapsto 0$ and
        \[
        \underbrace{xyx\cdots yx}_{\text{$n$-times $y$}}\mapsto -n,
        \quad
        \underbrace{yx\cdots yx}_{\text{$n$-times $y$}}\mapsto n.
        \]
\end{example}

\begin{example}
    Let $X$ be a set. The \textbf{free abelian heap} $\mathcal{A}(X)$ 
    is defined as the free heap $\mathcal{H}(X)$ on $X$ modulo
    the action of 
    $\bigcup_{n}\left(\Sym_{n+1}\times\Sym_n\right)$ given by 
    \[
    (\sigma,\tau)\cdot x_1y_1x_2y_2\cdots x_ny_nx_{n+1}
    =x_{\sigma(1)}y_{\tau(1)}x_{\sigma(2)}y_{\tau(2)}\cdots x_{\sigma(n)}y_{\sigma(n)}x_{\sigma(n+1)}
    \]
    for $\sigma\in\Sym_{n+1}$ and $\tau\in\Sym_{n}$. 
\end{example}

We now describe the \textbf{direct sum} (or coproduct) $H_1\boxtimes H_2$ of the 
abelian heaps $H_1$ and $H_2$. 
It is precisely the coproduct of 
$H_1$ and $H_2$ in the category of abelian heaps:
\[\begin{tikzcd}
	{H_1} & {H_1\boxtimes H_2} & {H_2} \\
	& K
	\arrow["{\iota_2}", from=1-2, to=1-3]
	\arrow[dashed, from=1-2, to=2-2]
	\arrow[from=1-3, to=2-2]
	\arrow["{\iota_1}", from=1-1, to=1-2]
	\arrow[from=1-1, to=2-2]
\end{tikzcd}\]
where  
$\iota_1\colon H_1\to H_1\boxtimes H_2$ and 
$\iota_2\colon H_2\to H_1\boxtimes H_2$ are the inclusions. 


Let $U$ be the disjoiunt union of $H_1$ and $H_2$ and
$\mathcal{A}(U)$ be the free abelian heap on $U$...
\[
H_1\boxtimes H_2=\mathcal{H}\left(G(H_1,e_1)\oplus G(H_2,e_2)\oplus\Z\right)
\]

\subsection{Trusses}

\begin{definition}
    A left (resp. right) \textbf{skew truss} is a heap $(T,[-,-,-])$ 
    with an associative binary operation $(x,y)\mapsto xy$ 
    such that 
    \[
    a[b,c,d]=[ab,ac,ad]\qquad\text{(resp. $[a,b,c]d=[ad,bd,cd]$).}
    \]
    If $T$ is an abelian heap, then we drop skew from the terminology. A \textbf{truss}
    is a left and right truss. 
\end{definition}

\begin{example}
    The set $2\Z+1=\{2m+1:m\in\Z\}$ is a truss with
    the usual multiplication and $[x,y,z]=x-y+z$.
\end{example}

\begin{example}
    The set 
    \[
    \frac{2\Z+1}{2\Z+1}=\left\{\frac{a}{b}:a,b\text{ odd integers}\right\}
    \]
    is a truss with the usual multiplication
    and $[x,y,z]=x-y+z$. Note that both operations are well-defined. 
\end{example}

\begin{example}
    Let $H$ be an abelian heap. The set $\End(H)$ of heap endomorphisms of $H$ 
    is an abelian heap with 
    \[
    [f,g,h](a)=[f(a),g(a),h(a)].
    \]
    We prove that the operation is well-defined. Since $H$ is abelian, 
    we can use Exercise \ref{xca:abelian} to obtain that  
    \begin{align*}
        [f,g,h]\left([a,b,c]\right) &= \left[ f([a,b,c]), g([a,b,c]), h([a,b,c]) \right]\\
        &=\left[ [f(a),f(b),f(c)], [g(a),g(b),g(c)], [h(a),h(b),h(c)]\right]\\
        &=\left[ [f(a),g(a),h(a)], [f(b),g(b),h(b)], [f(c),g(c),h(c)]\right]\\
        &=\left[ [f,g,h](a), [f,g,h](b), [f,g,h](c)\right].
    \end{align*}
    Moreover, $\End(H)$ is a truss with the usual composition:
    \begin{align*}
    &\left([f,g,h]\circ k\right)(a)=[f(k(a)),g(k(a),h(k(a))]
    \shortintertext{and}
    &\left(f\circ [h,g,k]\right)(a)=f([g(a),h(a),k(a)])
    =[f(g(a)),f(h(a)),f(k(a))].
    \end{align*}
\end{example}

Let $F$ be a field. An associative $F$-algebra is an $F$-vector space $A$ 
with a bilinear associative multiplication. In particular, $A$ is a ring. What if $A$ is replaced by 
an affine space?

\begin{example}
    Let $F$ be a field. Then 
    $F$ acts on $A$ by $(\lambda,a,b)\mapsto a+\lambda\overrightarrow{ab}$. An affine
    transformation is a pair $\left(f,\overrightarrow{f}\right)$, where 
    $f\colon A\to B$ is a map and $\overrightarrow{f}\colon \overrightarrow{A}\to\overrightarrow{B}$ is a linear
    transformation such that 
    \[
    \overrightarrow{f}\left(\overrightarrow{ab}\right)=\overrightarrow{f(a)f(b)}
    \]
    for all $a,b\in A$. In particular, this implies that 
    \begin{align*}
        [f(a),f(b),f(c)] &= f(a)+\overrightarrow{f(b)f(c)}
        =f(a)+\overrightarrow{f}\left(\overrightarrow{bc}\right)\\
        &=f(a)+\overrightarrow{f(a)f\left(a+\overrightarrow{bc}\right)}
        = f\left(a+\overrightarrow{bc}\right)
        = f\left([a,b,c]\right)
    \end{align*}
    for all $a,b,c\in A$. 
    
    Let $m\colon A\times A\to A$, $(x,y)\mapsto xy$, 
    be the multiplication map. 
    If $m$ is bi-affine, 
    then, in particular, 
    \[
    [a,b,c]d=m([a,b,c],d)=[m(a,d),m(b,d),m(c,d)]=[ad,bd,cd].
    \]
    
    Thus an affine space with an $F$-affine multiplication is a truss.
\end{example}

A (left) \textbf{skew ring} is a triple $(A,+,\cdot)$, where $(A,+)$ is a group, 
$(A,\cdot)$ is a semigroup and $a(b+c)=ab-a+ac$ for all $a,b,c\in A$. 

\begin{example}
    A (left) skew ring is a (left) truss
    with
    \[
    a[b,c,d]=a(b-c+d)=ab-ac+ad=[ab,ac,ad].
    \]
\end{example}

A \textbf{skew left brace} is a triple $(A,+,\cdot)$, where $(A,+)$ and $(A,\cdot)$ are
groups and $a(b+c)=ab-a+ac$ holds for all $a,b,c\in A$. It follows that
$1_A=0_A$.  

\begin{proposition}\
    \begin{enumerate}
        \item Let $B$ be a skew left brace. Then $\left(H(B),\cdot\right)$ is a skew left truss.
        \item Let $T$ be a skew left truss such that $(T,\cdot)$ is a group. If $1_T$ denotes
        the neutral element of $(T,\cdot)$, then 
            $x+y=[x,1_T,y]$ turns $G(T,1_T)$ into a skew left brace. 
    \end{enumerate}  
\end{proposition}

\begin{proof}[Sketch of the proof]
    We first prove 1). Note that 
    $x\cdot(-y)=x-x\cdot y+x$ for all $x,y\in B$. Now 
    \begin{align*}
    a [b,c,d]&=a (b-c+d)\\
    &=a b-a+a(-c)-a+ad\\
    &=a b-ac+ad\\
    &=[ab,ac,ad].
    \end{align*}
    
    We now prove 2). Let $a,b,c\in T$. Then 
    \[
    x(y+z)=x[y,1_T,z]=[xy,x,xz]=xy-x+xz.
    \]
    From this the claim follows. 
\end{proof}

\subsection{Trusses on \(\Z\)}

The additive group $\Z$ is a heap with the operation $[a,b,c]=a-b+c$. Following
\cite{MR4048518} we now describe the truss structures over $\left(\Z,[-,-,-]\right)$. 

Let 
\begin{align*}
    I_2(\Z) &= \left\{q\in M_2(\Z):q^2=q,\,\operatorname{trace}(q)=1\right\}\\
    &=\left\{\begin{pmatrix}
        b & a\\
        -c & 1-b
    \end{pmatrix}:a,b\in\Z,\,ac=b(b-1)\right\}.
\end{align*}
The trusses on $\Z$ are:
\begin{enumerate}
    \item $m\cdot n=m$.
    \item $m\cdot n=n$.
    \item $m\cdot n=amn+b(m+n)+c$. This truss will be denoted by $\Z(a,b,c)$. 
\end{enumerate}

One proves that $\Z(a,b,c)\simeq\Z(\alpha,\beta,\gamma)$ if and only if
\[
\begin{pmatrix}
\beta & \alpha\\
-\gamma & 1-\beta
\end{pmatrix}
=\begin{pmatrix}
1&0\\k&\pm 1
\end{pmatrix}
\begin{pmatrix}
b & a\\
-c & 1-b
\end{pmatrix}
\begin{pmatrix}
1&0\\ \mp k&\pm1
\end{pmatrix}
\]
for some $k\in\Z$. 

Note that
\[
D_\infty=\left\{\begin{pmatrix}
1&0\\k&\pm 1
\end{pmatrix}:k\in\Z\right\}
\]
is the infinite-dihedral group. So isomorphism classes
of commutative truss structures on 
$\left(\Z,[-,-,-]\right)$ are in bijective correspondence with orbits of the conjugation 
action of $D_\infty$ on $I_2(\Z)$. 

% 12/5/2022
\section{Lecture 3}

\subsection{A binary perspective}

Let $T$ be a truss and $e\in T$. Let $\sigma_L\colon T\to T$, $\sigma_L(a)=ae$, and 
$\sigma_R\colon T\to T$, $\sigma_R(a)=ea$. Note that $\sigma_L(e)=\sigma_R(e)$. 
Construct $\left(T,[-,-,-]\right)$ to the retract $G(T,e)$. Then
\[
a(b+c)=a[b,e,c]=ab-ae+ac=ab-\sigma_L(a)+ac
\]
and similarly $(a+b)c=ab-\sigma_R(c)+bc$. So one can think of trusses
as tuples $(T,+,\cdot,\sigma_L,\sigma_R)$ with 
$\sigma_L(a)=a0$ and $\sigma_R(a)=0a$. This is a different algebraic structure, though! 
\begin{enumerate}
    \item If $\sigma_L(a)=\sigma_R(a)=0$ for all $a$, then we obtain a ring. 
    \item If $\sigma_L(a)=\sigma_R(a)=a$ for all $a$, then we obtain a 
        skew left brace such that 
        $(a+b)c=ac-c+ab$ for all $a,b,c$.
\end{enumerate}

\subsection{Trusses and rings}

\begin{example}
    Let $R$ be a ring. Then $H(R,+)$ is a heap with $[a,b,c]=a-b+c$. Thus 
    $\left(H(R,+),\cdot\right)$ is a truss. It will be denoted by $T(R)$. 
\end{example}

\begin{theorem}
\label{thm:ring}
    Let $T$ be a truss. For every $e\in T$, $G(T,e)$ is an associative
    ring with operations $a\cdot b=[ab,ae,e^2,eb,e]$
    and $a+b=[a,e,b]$.
    This ring will be denoted by $R(T,e)$. 
    The map 
    $\tau_e^f\colon T\to T$, $a\mapsto [a,e,f]$, is an isomorphism of rings 
    $R(T,e)\to R(T,f)$. 
\end{theorem}

\begin{proof}[Sketch of the proof]
    Note that $T$ is an abelian heap. 
    Let us prove the distributivity. On the one hand, 
    \begin{align*}
        a\cdot (b+c) &= a\cdot [b,e,c]\\
        &=[a[b,e,c],ae,e^2,e[b,e,c],e]\\
        &=[ab,ae,ac,ae,e^2,eb,e^2,ec,e].
    \end{align*}
    On the other hand, 
    \begin{align*}
        a\cdot b+a\cdot c &= [a\cdot b,e,a\cdot c]\\
        &=[ab,ae,e^2,eb,e,e,ac,ae,e^2,ec,e]\\
        &=[ab,ae,e^2,eb,ac,ae,e^2,ec,e].
    \end{align*}
    So the distributivity follows from Exercise \ref{xca:abelian}. 
    
    The other axioms defining a ring are checked in a similar way. 
    
    To prove that $\tau_e^f\colon R(T,e)\to R(T,f)$ is a bijective
    ring homomorphism, 
    we first note that $\tau_e^f(\tau_f^e(a))=a$ 
    and $\tau_f^e(\tau_e^f(a))=a$ for all $a\in T$. Then 
    we use Exercise \ref{xca:abelian} to compute 
    \begin{align*}
        \tau_e^f(a\cdot b)&=[a\cdot b,e,f]
        =[[ab,ae,e^2,eb,e],e,f]
        =[ab,ae,e^2,eb,f]
        \shortintertext{and}
        \tau_e^f(a)\cdot\tau_e^f(b) &= [[a,e,f][b,e,f],[a,e,f]f,f^2,f[b,e,f],f]\\
        &=[ab,ae,af,eb,e^2,ef,fb,fe,f^2,af,ef,f^2,f^2,fb,fe,f^2,f]\\
        &=[ab,ae,e^2,eb,f].\qedhere
    \end{align*}
\end{proof}

\begin{exercise}
    Describe the trusses structures on $H(\Z)$. 
\end{exercise}

\subsection{Trusses in ideal extension of rings}

%We briefly describe a construction of \cite{MR4396016}. 

\begin{definition}
    An exact sequence of non-unitary rings and homomorphisms 
    \[
    \begin{tikzcd}
	    {0} & {R} & {S} & {\Z} & {0}
	    \arrow["{\Psi_R}", from=1-2, to=1-3]
	    \arrow[from=1-1, to=1-2]
	    \arrow[from=1-2, to=1-3]
	    \arrow["{\Psi_{\Z}}", from=1-3, to=1-4]
	    \arrow[from=1-4, to=1-5]
    \end{tikzcd}
    \]
    is called an \textbf{ideal extension} of $R$ to $S$ by $\Z$. 
\end{definition}

A \textbf{sub-truss} of $T$ is a non-empty subset of $T$ closed under both operations. 

\begin{proposition}
    If $q\in\Psi_{\Z}^{-1}(1)$, then 
    $q+\Psi_R(R)$ is a sub-truss of $T(S)$. 
\end{proposition}

\begin{proof}
    Let $a=q+\Psi_R(x)$, $b=q+\Psi_R(y)$ and $c=q+\Psi_R(z)$. On the one hand,
    \[
    [a,b,c]=a-b+c=q+\Psi_R([x,y,z])\in q+\Psi_R(R).
    \]
    On the other hand, 
    \begin{align*}
        ab &= (q+\Psi_R(x))(q+\Psi_R(y)) 
        = q^2+q\Psi_R(y)+\Psi_R(x)q+\Psi_R(x)\Psi_R(y).
    \end{align*}
    Note that $q\Psi_R(y)+\Psi_R(x)q+\Psi_R(x)\Psi_R(y)\in\Psi_R(R)$. Moreover, 
    \[
    q^2=q+(q^2-q)\in q+\Psi_R(R),
    \]
    as $q^2-q\in\ker\Psi_{\Z}=\Psi_R(R)$, since 
    \[
    \Psi_{\Z}(q^2-q)=\Psi_{\Z}(q)^2-\Psi_{\Z}(q)=1^2-1=0.\qedhere 
    \]
\end{proof}

\subsection{Ideal extensions and double homothetisms}

We first start with some definitions that independently 
go back to Mac Lane, Hoschild
and Petrich. 

\begin{definition}
Let $R$ be a ring. A \textbf{bimultiplication} (or multiplier) on $R$ is a pair of additive
endomorphisms $\sigma=(\sigma_L,\sigma_R)$, where 
$\sigma_L,\sigma_R\colon R\to R$ such that
\[
\sigma_R(ab)=\sigma_R(a)b,\quad
\sigma_L(ab)a\sigma_L(b),\quad
a\sigma_R(b)=\sigma_L(a)b
\]
for all $a,b\in R$. 
\end{definition}

\begin{definition}
    A bimultiplication $\sigma$ is a \textbf{double homothetism} (or self-permutable)
    if $\sigma_L\circ \sigma_R=\sigma_R\circ \sigma_L$.
\end{definition}

The following result appears in \cite{MR4396016}. 

\begin{theorem}
    Let $R$ be a ring, $\sigma$ be a double homothetism and $s\in R$. 
    Assume that $\sigma_L^2(a)=\sigma_L(a)+sa$ and 
    $\sigma_R^2(a)=\sigma_R(a)+sa$ for all $a\in R$. 
    Then the following statement hold:
    \begin{enumerate}
        \item The abelian group $R\times\Z$ is a ring with
        \[
        (a,k)(b,l)=(ab+l\sigma_L(a)+k\sigma_R(b)+kls,kl).
        \]
        It will be denoted by $R(\sigma,s)$. 
        \item The sequence 
        \[
        \begin{tikzcd}
	    {0} & {R} & {R(\sigma,s)} & {\Z} & {0}
	    \arrow["{\Psi_R}", from=1-2, to=1-3]
	    \arrow[from=1-1, to=1-2]
	    \arrow[from=1-2, to=1-3]
	    \arrow["{\Psi_{\Z}}", from=1-3, to=1-4]
	    \arrow[from=1-4, to=1-5]
    \end{tikzcd},
    \]
    where $\psi_R(r)=(r,0)$ and $\psi_{\Z}(r,k)=k$, is an ideal extension. 
    \item Any ideal ring extension of $R$ by $\Z$ is of this kind. 
    \end{enumerate}
\end{theorem}

\begin{proof}[Sketch of the proof]
    1) and 2) follow by direct calculation. 
    
    To prove 3) first note that
    the sequence of abelian groups 
    \[
    \begin{tikzcd}
	    {0} & {R} & {S} & {\Z} & {0}
	    \arrow["{\Psi_R}", from=1-2, to=1-3]
	    \arrow[from=1-1, to=1-2]
	    \arrow[from=1-2, to=1-3]
	    \arrow["{\Psi_{\Z}}", from=1-3, to=1-4]
	    \arrow[from=1-4, to=1-5]
    \end{tikzcd}
    \]
    splits. This means that there is a diagram 
\[\begin{tikzcd}
	0 & R & S & {\mathbb{Z}} & 0
	\arrow[from=1-1, to=1-2]
	\arrow[from=1-4, to=1-5]
	\arrow["{\Psi_{\mathbb{Z}}}", shift left=1, from=1-3, to=1-4]
	\arrow["{\Psi_R}", shift left=1, from=1-2, to=1-3]
	\arrow["{\kappa }", shift left=1, from=1-4, to=1-3]
	\arrow["{\zeta }", shift left=1, from=1-3, to=1-2]
\end{tikzcd}\]
    with exact rows. For $q\in\Psi_{\Z}^{-1}(1)$ let 
    \[
    \sigma_R(a)=\zeta(q\Psi_R(a)),
    \quad
    \sigma_L(a)=\zeta(\Psi_R(a)q),
    \quad
    s=\zeta(q^2-q).
    \]
    Then $\theta\colon R(\sigma,s)\to S$, $(a,\eta)\mapsto \Psi_R(a)+\eta q$, 
    is a bijective homomorphism of rings. 
\end{proof}

\subsection{Ideal extension from trusses}

\begin{theorem}
Let $T$ be non-empty truss, $e\in T$, and let $R(T;e)$ be the associated ring. Define
\[
\varepsilon_R : T \to T,\quad a\mapsto [ea,e^2,e], \qquad \varepsilon_L : T \to T,\quad a\mapsto [ae,e^2,e].
\]
Then:
1) $(\varepsilon_L,\varepsilon_R, e^2)$ is a homothetic datum on $R(T;e)$.

2) The ring $R(e):= R(T;e)(\varepsilon ,e^2)$ has multiplication (written in the abelian group $G(T;e)$ with $kx$ meaning $x+x\ldots +x$; the juxtaposition of elements in $T$ means the multiplication in $T$)
\[
(a,k)(b,l) = (ab +(l-1)ae+(k-1)eb + (k-1)(l-1)e^2, k\times l).
\]

3) The sequence
\[
    \begin{tikzcd}
	    {0} & {R(T;e)} & {T(e)} & {\Z} & {0}
	    \arrow["{\Psi_R}", from=1-2, to=1-3]
	    \arrow[from=1-1, to=1-2]
	    \arrow[from=1-2, to=1-3]
	    \arrow["{\Psi_{\Z}}", from=1-3, to=1-4]
	    \arrow[from=1-4, to=1-5]
    \end{tikzcd},
    \]
    where $\Psi_R(a) = (a,0)$ and $\Psi_\Z(a,k) = k$, is an ideal extension of $R(T;e)$ to $T(e)$ by $\Z$.
    
    4) $(T,1) = T(T(e); (e,1)$.
\end{theorem}

\begin{proof}[Sketch of the proof]
    1) and 2) follow by a direct calculation.
    
    3) follows from Theorem \ref{thm:ring}. 
    
    4) Note that, for all $a\in T$,
    \[
    (e,1) + \Psi_R(a) = (e,1) + (a,0) = (a,1),
    \]
    since $e$ is the neutral element in the retract $G(T;e)$. In the ring $T(e)$,
    \[
    (a,1)(b,1) = (ab + (1-1)ea + (1-1)be +(1-1)^2e^2 ,1) = (ab,1),
    \]
    so that $T$ embeds into $T(e)$ as a subtruss as claimed.
    \end{proof}

\subsection{Some lessons}

\begin{enumerate}
    \item Up to isomorphism trusses determine and are determined by ideal ring
    extensions by integers.
    \item Ideal ring extensions of $R$ by $\Z$ correspond to homothetic data in $R$. 
    \item To classify trusses built on $R$ is equivalent to classify homothetic data on $R$. 
\end{enumerate}

\begin{example}
    Let $A$ be an abelian group. We would like to find all isomorphism classes of trusses $T$ on the heap $H(A)$ such that the associated ring $R(T;0)$ (the choice of the retracting element doesn't matter, since we are studying isomorphism classes; with this choice the additive group of the ring $R(T;0)$ is simply $A$) has the zero multiplication (e.g.\ this would complete the classification of trusses on the heap of the group $\mathbb{Q}/\mathbb{Z}$ since the ring with the zero multiplication is the only one that can be built on this group).
    
    One can show that homothetic data giving rise to such trusses correspond to the ordered direct sum decompositions $\mathbf{A} = (A_1,A_2,A_3,A_4)$ of $A$ into abelian subgroups. Trusses corresponding to isomorphic decompositions $A_i\cong B_i$ are isomorphic. The produced in a truss $T(\mathbf{A})$ has the form:
    \[
    (a_1+a_2+a_3+a_4)(b_1+b_2+b_3+b_4) = b_1+a_2+a_3+b_3,
    \]
    $a_i, b_i \in A_i$. So, in particular if $A$ is indecomposable, then there are four non-isomorphic trusses:
    
    1) $T(A,0,0,0)$ has product $ab=b$,
    
    2) $T(0,A,0,0)$ has product $ab=a$,
    
    3) $T(0,0,A,0)$ has product $ab=a+b$ (a trivial brace),
    
    4) $T(0,0,0,A)$ has product $ab=0$.
\end{example}

\subsection{Congruences of trusses: paragons}

\begin{definition}
    A \textbf{left (resp. right) paragon} in a truss $T$ is a sub-heap $P$ of $T$ 
    such that for all $p,q\in P$ and all $a\in T$ 
    one has $[ap,aq,q]\in P$ (resp. $[pa,qa,q]\in P$). A \textbf{paragon} 
    is a left paragon that is also a right paragon. 
\end{definition}

\begin{example}
    Let $R$ be a ring and $I$ be a left ideal of $R$. Then 
    $a+I$ is a left paragon in $T(R)$ for every $a\in R$. In fact, every coset is a sub-heap and
    \begin{align*}
    [b(a+x),b(a+y),a+y]&=ba+bx-(ba+by)+a+y\\
    &=a+b(x-y)+y\in a+I
    \end{align*}
    for all $x,y\in I$. 
\end{example}

Let $T$ and $T'$ be (left) trusses. 
A map $f\colon T\to T'$ is a \textbf{homomorphism of (left) trusses} if 
$f$ is a heap homomorphism, i.e. 
$f([a,b,c])=[f(a),f(b),f(c)]$ for all $a,b,c\in A$,
and $f(ab)=f(a)f(b)$ for all $a,b\in A$. 

\begin{proposition}
    Let $f\colon T\to T'$ be a left trusses homomorphism. Then $P=f^{-1}(b)$ 
    is a paragon in $T$ for all $b\in T'$. 
\end{proposition}

\begin{proof}
    Let $a\in T$ and $p,q\in f^{-1}(b)$. Then 
    \begin{align*}
    f([ap,aq,q])&=[f(ap),f(aq),f(q)]\\
    &=[f(a)f(p),f(a)f(q),f(q)]=[f(a)b,f(a)b,b]=b.    
    \end{align*}
    Similarly, $f([pa,qa,q])=b$. 
\end{proof}

\section{}

\subsection{Parangon and congruences in trusses}
\subsection{Congruences in one-sided trusses}
\subsection{Examples}
\subsection{Modules over trusses}
\subsection{Modules as algebraic structures}
\subsection{Induced module}
\subsection{Congruences of modules}
\subsection{Heaps of modules}
\subsection{Modules over trusses vs. modules over rings}


\bibliographystyle{abbrv}
\bibliography{refs}

%\printindex

\end{document}
